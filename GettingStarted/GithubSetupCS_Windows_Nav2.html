
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.3">
    
    
      
        <title>System Tests with Continuous Simulation on GitHub Actions (Windows) - ROS on Windows</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3b61ea93.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.39b8e14a.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

  

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../index.html" title="ROS on Windows" class="md-header-nav__button md-logo" aria-label="ROS on Windows">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            ROS on Windows
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              System Tests with Continuous Simulation on GitHub Actions (Windows)
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/ms-iot/rosonwindows/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="ROS on Windows" class="md-nav__button md-logo" aria-label="ROS on Windows">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ROS on Windows
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ms-iot/rosonwindows/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="../index.html" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../WhatsNew.html" class="md-nav__link">
      What's New
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../Build/status.html" class="md-nav__link">
      Build Status
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    
    <label class="md-nav__link" for="nav-4">
      Get ROS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Get ROS" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Get ROS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="Setup.html" class="md-nav__link">
      ROS 1
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="SetupRos2.html" class="md-nav__link">
      ROS 2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
    
    <label class="md-nav__link" for="nav-5">
      Using ROS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Using ROS" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Using ROS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="NewToROS.html" class="md-nav__link">
      For new ROS Users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    
    <label class="md-nav__link" for="nav-6">
      Getting Started with ROS 1
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started with ROS 1" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Getting Started with ROS 1
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="http://wiki.ros.org/ROS/Tutorials" class="md-nav__link">
      Tutorials at ROS Wiki ðŸ”—
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../Moveit/moveit_tutorials.html" class="md-nav__link">
      MoveIt
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../Moveit/UR3.html" class="md-nav__link">
      Universal Robot UR3
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../Turtlebot/Turtlebot3.html" class="md-nav__link">
      TurtleBot3
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../tutorials/sick_s300/getting_started.html" class="md-nav__link">
      SICK S300
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../tutorials/ethercat/soem.html" class="md-nav__link">
      Simple Open EtherCAT Master
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../tutorials/peak/peak.html" class="md-nav__link">
      PEAK-System&reg; PCAN&reg;-Basic
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
    
    <label class="md-nav__link" for="nav-7">
      Getting Started with ROS 2
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started with ROS 2" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Getting Started with ROS 2
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../ros2/nav2.html" class="md-nav__link">
      Navigation 2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  


  
  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Using Github Actions
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Using Github Actions" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Using Github Actions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="GithubSetupCI.html" class="md-nav__link">
      Continuous Integration
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="GithubSetupCD.html" class="md-nav__link">
      Continuous Delivery
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="GithubSetupCS_Windows.html" class="md-nav__link">
      Continuous Simulation (Windows)
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="GithubSetupCS_Linux.html" class="md-nav__link">
      Continuous Simulation (Linux)
    </a>
  </li>

        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Continuous Simulation for Navigation2 System Tests
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="GithubSetupCS_Windows_Nav2.html" class="md-nav__link md-nav__link--active">
      Continuous Simulation for Navigation2 System Tests
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-1-build-and-run-nav2-system-tests-locally" class="md-nav__link">
    Exercise 1: Build And Run Nav2 System Tests Locally
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-2-provision-cloud-ci-environment-with-github-actions" class="md-nav__link">
    Exercise 2: Provision Cloud CI Environment With GitHub Actions
  </a>
  
    <nav class="md-nav" aria-label="Exercise 2: Provision Cloud CI Environment With GitHub Actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-1-create-a-github-repository" class="md-nav__link">
    Task 1: Create a GitHub Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-2-prepare-permission-for-self-hosted-github-runner" class="md-nav__link">
    Task 2: Prepare Permission For Self-Hosted GitHub Runner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-3-deploy-virtual-machine-and-register-as-self-hosted-github-runner" class="md-nav__link">
    Task 3: Deploy Virtual Machine and Register as Self-Hosted GitHub Runner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-4-create-the-github-workflow-files" class="md-nav__link">
    Task 4: Create the GitHub Workflow Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-4-observe-the-github-actions" class="md-nav__link">
    Task 4: Observe the GitHub Actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" >
    
    <label class="md-nav__link" for="nav-9">
      Using Azure Pipelines
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Using Azure Pipelines" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        Using Azure Pipelines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="AzureSetupCI.html" class="md-nav__link">
      Continuous Integration
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="AzureSetupCD.html" class="md-nav__link">
      Continuous Delivery
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="AzureSetupCS_Windows.html" class="md-nav__link">
      Continuous Simulation (Windows)
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="AzureSetupCS_Linux.html" class="md-nav__link">
      Continuous Simulation (Linux)
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../ros2/system_tests.html" class="md-nav__link">
      Continuous Simulation for Navigation2 System Tests
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10" >
    
    <label class="md-nav__link" for="nav-10">
      Porting Guide
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Porting Guide" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon"></span>
        Porting Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="UsingROSonWindows.html" class="md-nav__link">
      Consuming a ROS Package
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="PortingANode.html" class="md-nav__link">
      Porting a ROS Package
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="UsingVCPKG.html" class="md-nav__link">
      Using a C++ Dependency
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="AddingVCPKG.html" class="md-nav__link">
      Porting a C++ Dependency
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../Porting/Cookbook.html" class="md-nav__link">
      Porting Cookbook
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" >
    
    <label class="md-nav__link" for="nav-11">
      ROS at Microsoft
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="ROS at Microsoft" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon"></span>
        ROS at Microsoft
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../ROSAtMS/AzureVM.html" class="md-nav__link">
      Azure VM with ROS
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../ROSAtMS/WinML.html" class="md-nav__link">
      Windows ML ROS Node
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="https://github.com/microsoft/azure_kinect_ros_driver" class="md-nav__link">
      Azure Kinect ROS Node ðŸ”—
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="https://github.com/microsoft/ros_azure_iothub" class="md-nav__link">
      Azure IoT Hub Node ðŸ”—
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="https://aka.ms/ros/vscode" class="md-nav__link">
      Visual Studio Code ROS Extension ðŸ”—
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12" >
    
    <label class="md-nav__link" for="nav-12">
      Advanced
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Advanced" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        <span class="md-nav__icon md-icon"></span>
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../Build/source.html" class="md-nav__link">
      Source Installation
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../Advanced/Performance.html" class="md-nav__link">
      Optimizing Performance
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="https://github.com/ms-iot/msix_ros" class="md-nav__link">
      ROS on MSIX Packaging ðŸ”—
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13" >
    
    <label class="md-nav__link" for="nav-13">
      Support
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Support" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        <span class="md-nav__icon md-icon"></span>
        Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="Troubleshooting.html" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="https://github.com/ms-iot/rosonwindows/issues" class="md-nav__link">
      Create Issue
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="https://aka.ms/ros/support" class="md-nav__link">
      Paid Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-1-build-and-run-nav2-system-tests-locally" class="md-nav__link">
    Exercise 1: Build And Run Nav2 System Tests Locally
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-2-provision-cloud-ci-environment-with-github-actions" class="md-nav__link">
    Exercise 2: Provision Cloud CI Environment With GitHub Actions
  </a>
  
    <nav class="md-nav" aria-label="Exercise 2: Provision Cloud CI Environment With GitHub Actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-1-create-a-github-repository" class="md-nav__link">
    Task 1: Create a GitHub Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-2-prepare-permission-for-self-hosted-github-runner" class="md-nav__link">
    Task 2: Prepare Permission For Self-Hosted GitHub Runner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-3-deploy-virtual-machine-and-register-as-self-hosted-github-runner" class="md-nav__link">
    Task 3: Deploy Virtual Machine and Register as Self-Hosted GitHub Runner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-4-create-the-github-workflow-files" class="md-nav__link">
    Task 4: Create the GitHub Workflow Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-4-observe-the-github-actions" class="md-nav__link">
    Task 4: Observe the GitHub Actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ms-iot/rosonwindows/edit/master/docs/GettingStarted/GithubSetupCS_Windows_Nav2.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Continuous Simulation for Navigation2 System Tests</h1>
                
                <h2 id="overview">Overview</h2>
<p>After defining your robot behavior, it is important to ensure the robot running as expected as the project iterates.
The traditional unit tests and integration tests usually use the static data to exercise your code.
Continous simulation demonstrates how you make use of <code>GitHub Actions</code> and <a href="https://azure.microsoft.com/en-us/resources/templates/ros-vm-windows/"><code>ROS on Azure with Windows VM</code></a> to run your code in Hardware-in-the-loop simulation and virtual environments.
In this lab, we begin with self-driving car project with Gazebo simulation, test it on the rostest framework, and then cloud-host the continuous simulation on GitHub Actions.</p>
<p>This tutorial is to show how to use <code>GitHub Actions</code> to exercise the <a href="https://github.com/ros-planning/navigation2/tree/main/nav2_system_tests">Navigation2 System Tests</a>.
It is a comprehensive End-to-End test pass with Gazebo simulation.
This project is a good example for ROS 2 developers how to organize a End-to-End tests across multiple packages and tools.</p>
<h2 id="objectives">Objectives</h2>
<ul>
<li>
<p>Run and observe the Nav2 system tests running locally.</p>
</li>
<li>
<p>Deploy and register a ROS on Windows GPU optimized virtual machine on Azure.</p>
</li>
<li>
<p>Integrate a GitHub project with GitHub Actions.</p>
</li>
<li>
<p>Observe the simulation runs and test results on the pipeline.</p>
</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>
<p>An Microsoft Azure account from https://portal.azure.com.</p>
</li>
<li>
<p>A GitHub account from https://github.com.</p>
</li>
</ul>
<h2 id="exercise-1-build-and-run-nav2-system-tests-locally">Exercise 1: Build And Run Nav2 System Tests Locally</h2>
<ol>
<li>
<p><a href="SetupRos2.html"><code>Install ROS2</code></a>. <code>Foxy</code> is recommended.</p>
</li>
<li>
<p>Open the ROS 2 command prompt and activate the Gazebo environment.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>c<span class="p">:</span><span class="nl">\opt\ros\foxy\x64\setup.bat</span>
c<span class="p">:</span><span class="nl">\opt\ros\foxy\x64\share\gazebo\setup.bat</span>
<span class="k">set</span> <span class="nv">SDF_PATH</span><span class="p">=</span>c:\opt\ros\foxy\x64\share\sdformat\1.6
</code></pre></div>
<ol>
<li>Create an empty workspace and clone the Navigation2 repositories. For example,</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">:</span><span class="c1">: create an empty workspace</span>
<span class="k">mkdir</span> c:\nav2_ws\src
<span class="k">cd</span> c:\nav2_ws

<span class="p">:</span><span class="c1">: clone the Navigation2</span>
curl https://raw.githubusercontent.com/ms-iot/ROSOnWindows/master/docs/ros2/navigation2_foxy.repos -o navigation2_foxy.repos
vcs import src <span class="p">&lt;</span> navigation2_foxy.repos
</code></pre></div>
<ol>
<li>Build the Navigation2 System Tests projects.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">:</span><span class="c1">: then, build the nav2_system_tests</span>
colcon build --packages-select nav2_system_tests
</code></pre></div>
<p>A few moment later, a similar message should be put to indicate a successful build:</p>
<div class="highlight"><pre><span></span><code>Summary: 1 package finished [2min 10s]
</code></pre></div>
<blockquote>
<p>In cases of any build failures, <code>Log</code> folder can be found under the workspace. Detailed information can be found there.</p>
</blockquote>
<ol>
<li>Run the Nav2 System Tests</li>
</ol>
<div class="highlight"><pre><span></span><code>colcon test --packages-select nav2_system_tests
</code></pre></div>
<ol>
<li>Verify the test result.</li>
</ol>
<div class="highlight"><pre><span></span><code>colcon test-result
</code></pre></div>
<h2 id="exercise-2-provision-cloud-ci-environment-with-github-actions">Exercise 2: Provision Cloud CI Environment With GitHub Actions</h2>
<h3 id="task-1-create-a-github-repository">Task 1: Create a GitHub Repository</h3>
<ol>
<li><a href="https://docs.github.com/en/github/getting-started-with-github/create-a-repo">Create a repository</a> under your account.</li>
<li>Go to your repository and navigate to the <code>Actions</code> tab.</li>
<li>Make sure it is enabled by your permission.
   <img alt="github-actions" src="https://github.com/ms-iot/ros_simulation_lab/raw/master/docs/github-actions.png" /></li>
</ol>
<h3 id="task-2-prepare-permission-for-self-hosted-github-runner">Task 2: Prepare Permission For Self-Hosted GitHub Runner</h3>
<ol>
<li>Create a GitHub <a href="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line">personal access token</a> and select the scope of <code>repo</code>.</li>
<li>Take a note of the personal access token (PAT).</li>
</ol>
<h3 id="task-3-deploy-virtual-machine-and-register-as-self-hosted-github-runner">Task 3: Deploy Virtual Machine and Register as Self-Hosted GitHub Runner</h3>
<p>This <a href="https://azure.microsoft.com/en-us/resources/templates/ros-vm-windows/"><code>ROS on Azure with Windows VM</code></a> is a Azure quickstart template to help setup an Azure virtual machine with ROS installed.</p>
<ol>
<li>Navigate to the template. Click <code>Deploy to Azure</code>.</li>
<li>A form will be brought to you and here are some important parameters for this exercise.</li>
<li><strong>Virtual Machine Size</strong>: Select <code>Standard_NV*</code> for GPU optimized virtual machine. This is required for Gazebo.</li>
<li><strong>Vm Image</strong>: Select <code>Visual Studio 2019</code> for the required toolchain to build project.</li>
<li><strong>Pipeline Provider</strong>: Select <code>GitHubRunner</code> to register as GitHub Self-hosted Runner.</li>
<li><strong>GitHub Repo</strong>: This is your GitHub account and the repository name seperated by a forward slash. For example, <code>&lt;your GitHub account&gt;/ros_simulation_lab</code> is the value of this fork.</li>
<li><strong>GitHub Personal Access Token</strong>: This is the PAT noted from the previous section.</li>
</ol>
<h3 id="task-4-create-the-github-workflow-files">Task 4: Create the GitHub Workflow Files</h3>
<p>The GitHub workflow is a YAML file to define what the steps to take by the GitHub runner.
In this example, you will define one to checkout the code, build it and run tests.</p>
<ol>
<li>Create a file <code>.github/workflows/build-windows.yml</code> under your repository.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Build and Test on Windows</span>
<span class="nt">on</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">push</span><span class="p p-Indicator">]</span>

<span class="nt">jobs</span><span class="p">:</span>
  <span class="nt">build_and_test</span><span class="p">:</span>
    <span class="nt">runs-on</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">self-hosted</span><span class="p p-Indicator">,</span> <span class="nv">windows</span><span class="p p-Indicator">]</span>
    <span class="nt">steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">uses</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">actions/checkout@v2</span>
      <span class="nt">with</span><span class="p">:</span>
        <span class="nt">submodules</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">recursive</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Prepare</span>
      <span class="nt">run</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">$env:ChocolateyInstall=&quot;c:\opt\chocolatey&quot;</span>
        <span class="no">Set-ExecutionPolicy Bypass -Scope Process -Force;</span>
        <span class="no">iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))</span>
        <span class="no">choco sources add -n=roswin -s https://aka.ms/ros/public --priority 1</span>
        <span class="no">choco install ros-foxy-desktop -y --pre --no-progress -i</span>
      <span class="nt">shell</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">powershell</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Build</span>
      <span class="nt">run</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">call &quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\Common7\Tools\VsDevCmd.bat&quot; -arch=amd64 -host_arch=amd64</span>
        <span class="no">call &quot;c:\opt\ros\foxy\x64\setup.bat&quot;</span>
        <span class="no">call &quot;c:\opt\ros\foxy\x64\share\gazebo\setup.bat&quot;</span>
        <span class="no">set &quot;SDF_PATH=c:\opt\ros\foxy\x64\share\sdformat\1.6&quot;</span>
        <span class="no">mkdir ws\src</span>
        <span class="no">cd ws</span>
        <span class="no">curl https://raw.githubusercontent.com/ms-iot/ROSOnWindows/master/docs/ros2/navigation2_foxy.repos -o navigation2_foxy.repos</span>
        <span class="no">vcs import src &lt; navigation2_foxy.repos</span>
        <span class="no">colcon build --packages-select nav2_system_tests</span>
        <span class="no">colcon test --packages-select nav2_system_tests --event-handlers console_direct+</span>
        <span class="no">colcon test-result</span>
      <span class="nt">shell</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cmd</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Archive test results</span> <span class="c1"># workaround: https://github.com/actions/upload-artifact/issues/76</span>
      <span class="nt">run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zip -r results.zip build</span>
      <span class="nt">working-directory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ws</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Upload test results</span>
      <span class="nt">uses</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v2</span>
      <span class="nt">with</span><span class="p">:</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ws/results.zip</span>
</code></pre></div>
<ol>
<li>Commit and push the workflow files to your remote repository.</li>
</ol>
<h3 id="task-4-observe-the-github-actions">Task 4: Observe the GitHub Actions</h3>
<p>Now a workflow should be scheduled to run under your repository.</p>
<ol>
<li>
<p>Navigate to the <code>Actions</code> tab and make sure workflows are listed there.
   <img alt="github-actions-summary" src="https://github.com/ms-iot/ros_simulation_lab/raw/master/docs/github-actions-summary.png" /></p>
</li>
<li>
<p>Observe the runs of the workflows.
   And you can explore more on <a href="https://help.github.com/en/actions/configuring-and-managing-workflows/configuring-a-workflow#about-workflows">GitHub Help</a>.</p>
</li>
</ol>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="GithubSetupCS_Linux.html" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Continuous Simulation (Linux)
              </div>
            </div>
          </a>
        
        
          <a href="AzureSetupCI.html" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Continuous Integration
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.08c56446.min.js"></script>
      <script src="../assets/javascripts/bundle.6ced434e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>