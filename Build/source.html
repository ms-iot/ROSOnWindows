<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Source Installation - ROS on Windows</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Source Installation";
    var mkdocs_page_input_path = "Build\\source.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> ROS on Windows</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../index.html">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../WhatsNew.html">What's New</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="buildfarm.html">Build Status</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Get ROS</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../GettingStarted/Setup.html">Binary Installation</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Using ROS</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../GettingStarted/NewToROS.html">For new ROS Users</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="http://wiki.ros.org/ROS/Tutorials">Tutorials at ROS Wiki &nearr;</a>
                </li>
                <li class="">
                    
    <a class="" href="../Moveit/moveit_tutorials.html">MoveIt</a>
                </li>
                <li class="">
                    
    <a class="" href="../Moveit/UR3.html">Universal Robot UR3</a>
                </li>
                <li class="">
                    
    <a class="" href="../Turtlebot/Turtlebot3.html">TurtleBot 3</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials/sick_s300/getting_started.html">SICK S300</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials/ethercat/soem.html">Simple Open EtherCAT Master</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials/peak/peak.html">PEAK-System&reg; PCAN&reg;-Basic</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">CI/CD Practices</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../GettingStarted/SetupCI.html">Continuous Integration Template</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Porting Guide</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../GettingStarted/UsingROSonWindows.html">Consuming a ROS Package</a>
                </li>
                <li class="">
                    
    <a class="" href="../GettingStarted/PortingANode.html">Porting a ROS Package</a>
                </li>
                <li class="">
                    
    <a class="" href="../GettingStarted/UsingVCPKG.html">Using a C++ Dependency</a>
                </li>
                <li class="">
                    
    <a class="" href="../GettingStarted/AddingVCPKG.html">Porting a C++ Dependency</a>
                </li>
                <li class="">
                    
    <a class="" href="../Porting/Cookbook.html">Porting Cookbook</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">ROS at Microsoft</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../ROSAtMS/ROS1AzureVM.html">ROS 1 Azure VM</a>
                </li>
                <li class="">
                    
    <a class="" href="../ROSAtMS/WinML.html">Windows ML ROS Node</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/microsoft/azure_kinect_ros_driver">Azure Kinect ROS Node &nearr;</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/microsoft/ros_azure_iothub">Azure IoT Hub Node &nearr;</a>
                </li>
                <li class="">
                    
    <a class="" href="https://aka.ms/ros/vscode">Visual Studio Code ROS Extension &nearr;</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Advanced</span>
    <ul class="subnav">
                <li class=" current">
                    
    <a class="current" href="source.html">Source Installation</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#installing-from-source-ros-for-windows">Installing from source (ROS for Windows)</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#prerequisites">Prerequisites</a></li>
        
            <li><a class="toctree-l4" href="#installation">Installation</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../Advanced/Performance.html">Optimizing Performance</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Support</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../GettingStarted/Troubleshooting.html">Troubleshooting</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/ms-iot/rosonwindows/issues">Create Issue</a>
                </li>
                <li class="">
                    
    <a class="" href="https://aka.ms/ros/support">Paid Support</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ROS on Windows</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      
        
          <li>Advanced &raquo;</li>
        
      
    
    <li>Source Installation</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/ms-iot/rosonwindows/edit/master/docs/Build/source.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="installing-from-source-ros-for-windows">Installing from source (ROS for Windows)</h1>
<p>Install from source requires that you download and compile the source code on your own.</p>
<blockquote>
<p>This page is organized as the same way as <a href="http://wiki.ros.org/Installation/Source">ROS\Installation\Source</a>. This page is still working in progress.</p>
</blockquote>
<h2 id="prerequisites">Prerequisites</h2>
<h3 id="installing-toolchains">Installing toolchains</h3>
<p>Follow the Prerequisites section from <a href="../GettingStarted/Setup.html">Setup.md</a> to install Visual Studio Build Tool 2017, Cmake, and Chocolatey.</p>
<blockquote>
<p>Please note that <em>ROS for Windows</em> expects the 64-bit Python2.7 to be installed under <code>C:\opt\python27amd64\</code>.</p>
</blockquote>
<h3 id="installing-bootstrap-dependencies">Installing bootstrap dependencies</h3>
<p>These tools are used to facilitate the download and management of ROS packages and their dependencies, among other things.</p>
<p><strong>Generic (pip):</strong></p>
<p>If you are using a non-Debian system you need to make sure that you have all build tools (compiler, CMake, etc.) installed. You can install all ROS Python tools via PIP:</p>
<pre><code class="no-highlight">pip install -U rosdep rosinstall_generator wstool rosinstall
curl --output requirements.txt -L https://raw.githubusercontent.com/ms-iot/rosdistro-db/init_windows/rosdistro_cache/catkin-requirements.txt
pip install -U --no-deps --force-reinstall -r requirements.txt
</code></pre>

<p>If there are errors with this or the rosdep step below, your system's version of pip may be out-of-date. Use your system's package management to update it, or use it to update itself:</p>
<pre><code class="no-highlight">python -m pip install -U pip setuptools
</code></pre>

<h3 id="initializing-rosdep">Initializing rosdep</h3>
<pre><code class="no-highlight">rosdep init
curl --output 10-ms-iot.list -L https://raw.githubusercontent.com/ms-iot/rosdistro-db/init_windows/rosdep/sources.list.d/10-ms-iot.list
copy 10-ms-iot.list c:\etc\ros\rosdep\sources.list.d
rosdep update
</code></pre>

<p>The <code>10-ms-iot.list</code> points to the rosdep database of ROS for Windows and it will be evaulated before the default source list.</p>
<h3 id="configure-chocolatey-sources">Configure Chocolatey sources</h3>
<pre><code class="no-highlight">choco source add -n=ros-win -s=&quot;https://roswin.azurewebsites.net/api/v2&quot; --priority=1
choco source disable -n=chocolatey
</code></pre>

<p>This will add roswin Chocolatey server as a source to discover libraries and tools. Also disable the default one to avoid any potential package naming conflicts.</p>
<h2 id="installation">Installation</h2>
<p>Start by building the core ROS packages.</p>
<h3 id="create-a-catkin-workspace">Create a catkin Workspace</h3>
<p>In order to build the core packages, you will need a catkin workspace. Create one now:</p>
<pre><code class="no-highlight">mkdir c:\ros_catkin_ws
cd c:\ros_catkin_ws
</code></pre>

<p>Next we will want to fetch the core packages so we can build them. We will use wstool for this. Select the wstool command for the particular variant you want to install:</p>
<p><strong>Desktop Install (recommended):</strong> ROS, rqt, rviz, and robot-generic libraries</p>
<pre><code class="no-highlight">set ROSDISTRO_INDEX_URL=https://raw.githubusercontent.com/ms-iot/rosdistro-db/init_windows/index.yaml
rosinstall_generator desktop --rosdistro melodic --deps --upstream-development &gt; melodic-desktop.rosinstall
wstool init src melodic-desktop.rosinstall
</code></pre>

<p><strong>ROS-Comm: (Bare Bones)</strong> ROS package, build, and communication libraries. No GUI tools.</p>
<pre><code class="no-highlight">set ROSDISTRO_INDEX_URL=https://raw.githubusercontent.com/ms-iot/rosdistro-db/init_windows/index.yaml
rosinstall_generator ros_comm --rosdistro melodic --deps --upstream-development &gt; melodic-ros_comm.rosinstall
wstool init src melodic-ros_comm.rosinstall
</code></pre>

<p>This will add all of the catkin packages in the given variant and then fetch the sources into the ~/ros_catkin_ws/src directory. The command will take a few minutes to download all of the core ROS packages into the src folder.</p>
<h3 id="resolving-dependencies">Resolving Dependencies</h3>
<p>Before you can build your catkin workspace you need to make sure that you have all the required dependencies. We use the rosdep tool for this:</p>
<pre><code class="no-highlight">rosdep install --from-paths src --ignore-src --rosdistro melodic -r -y
</code></pre>

<p>This will look at all of the packages in the src directory and find all of the dependencies they have. Then it will recursively install the dependencies.</p>
<p>The --from-paths option indicates we want to install the dependencies for an entire directory of packages, in this case src. The --ignore-src option indicates to rosdep that it shouldn't try to install any ROS packages in the src folder from the package manager, we don't need it to since we are building them ourselves. The --rosdistro option is required because we don't have a ROS environment setup yet, so we have to indicate to rosdep what version of ROS we are building for. Finally, the -y option indicates to rosdep that we don't want to be bothered by too many prompts from the package manager.</p>
<p>After a while (and maybe some prompts for your password) rosdep will finish installing system dependencies and you can continue.</p>
<h3 id="building-the-catkin-workspace">Building the catkin Workspace</h3>
<p>Once it has completed downloading the packages and resolving the dependencies you are ready to build the catkin packages. We will use the catkin_make_isolated command because there are both catkin and plain cmake packages in the base install, when developing on your catkin only workspaces you may choose to use <a href="http://wiki.ros.org/catkin/commands/catkin_make">catkin/commands/catkin_make</a> which only works with catkin packages.</p>
<p>Invoke catkin_make_isolated:</p>
<pre><code class="no-highlight">set PATH=c:\opt\rosdeps\x64\bin;%PATH%

copy &quot;.\src\catkin\bin\catkin_make_isolated&quot; &quot;.\src\catkin\bin\catkin_make_isolated.py&quot;
python .\src\catkin\bin\catkin_make_isolated.py --use-nmake --install ^
--install-space c:/opt/ros/melodic/x64 ^
-DCMAKE_BUILD_TYPE=Release ^
-DCMAKE_PREFIX_PATH=c:/opt/ros/melodic/x64;c:/opt/rosdeps/x64
</code></pre>

<blockquote>
<p>The rosdep BIN path needs to be added to <code>PATH</code> so catkin can find the build tools (e.g. CMake).</p>
</blockquote>
<p>Now the packages should have been installed to <code>c:/opt/ros/melodic/x64</code> or to wherever you specified with the --install-space argument. If you look in that directory you will see that a setup.bash file have been generated. To utilize the things installed there simply source that file like so:</p>
<pre><code class="no-highlight">c:\opt\ros\melodic\x64\setup.bat
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Advanced/Performance.html" class="btn btn-neutral float-right" title="Optimizing Performance">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../ROSAtMS/WinML.html" class="btn btn-neutral" title="Windows ML ROS Node"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/ms-iot/rosonwindows/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../ROSAtMS/WinML.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Advanced/Performance.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
